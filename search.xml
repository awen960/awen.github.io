<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>解决跨域</title>
      <link href="/2023/01/18/jie-jue-kua-yu/"/>
      <url>/2023/01/18/jie-jue-kua-yu/</url>
      
        <content type="html"><![CDATA[<h3 id="1-为什么会有跨域这个问题？"><a href="#1-为什么会有跨域这个问题？" class="headerlink" title="1.为什么会有跨域这个问题？"></a>1.为什么会有跨域这个问题？</h3><blockquote><p>原因是浏览器为了安全，而采用的同源策略（Same origin policy）</p></blockquote><h3 id="2-什么是同源策略？"><a href="#2-什么是同源策略？" class="headerlink" title="2.什么是同源策略？"></a>2.什么是同源策略？</h3><pre><code>1. 同源策略是由Netscape提出的一个著名的安全策略，现在所有支持JavaScript 的浏览器都会使用这个策略。2. Web是构建在同源策略基础之上的，浏览器只是针对同源策略的一种实现。3. 所谓同源是指：协议，域名（IP），端口必须要完全相同   即：协议、域名（IP）、端口都相同，才能算是在同一个域里。</code></pre><p>备注：规则举例如下(假设已有网站地址为：<a href="http://study.cn" target="_blank" rel="noopener">http://study.cn</a>)<br><img src="https://s2.ax1x.com/2019/01/26/knAIit.png" alt="Alt text"></p><h3 id="3-没有同源策略的危险场景："><a href="#3-没有同源策略的危险场景：" class="headerlink" title="3.没有同源策略的危险场景："></a>3.没有同源策略的危险场景：</h3><p>危险场景：</p><blockquote><p>有一天你刚睡醒，收到一封邮件，说是你的银行账号有风险，赶紧点进<a href="http://www.yinghang.com改密码。你着急的赶紧点进去，还是熟悉的银行登录界面，你果断输入你的账号密码，登录进去看看钱有没有少了，睡眼朦胧的你没看清楚，平时访问的银行网站是www.yinhang.com，而现在访问的是www.yinghang.com，随后你来了一条短信，钱没了，这个钓鱼网站做了什么呢？大概是如下思路：" target="_blank" rel="noopener">www.yinghang.com改密码。你着急的赶紧点进去，还是熟悉的银行登录界面，你果断输入你的账号密码，登录进去看看钱有没有少了，睡眼朦胧的你没看清楚，平时访问的银行网站是www.yinhang.com，而现在访问的是www.yinghang.com，随后你来了一条短信，钱没了，这个钓鱼网站做了什么呢？大概是如下思路：</a></p></blockquote><pre><code>&lt;iframe id="baidu" src="https://www.baidu.com"&gt;&lt;/iframe&gt;&lt;script type="text/javascript"&gt;  const iframe = window.frames['baidu']  const inputNode = iframe.document.getElementById('输入敏感信息的input的id')  console.log(inputNode.value)&lt;/script&gt;</code></pre><h3 id="3-非同源受到哪些限制？"><a href="#3-非同源受到哪些限制？" class="headerlink" title="3.非同源受到哪些限制？"></a>3.非同源受到哪些限制？</h3><pre><code>1. Cookie不能读取；2. DOM无法获得；3. Ajax请求不能发送</code></pre><h3 id="4-如何在开发中解决跨域问题："><a href="#4-如何在开发中解决跨域问题：" class="headerlink" title="4.如何在开发中解决跨域问题："></a>4.如何在开发中解决跨域问题：</h3><p><strong>1.JSONP解决发送请求跨域问题：</strong></p><blockquote><p>要明确的是：JSONP不是一种技术，而是程序员“智慧的结晶”（利用了标签请求资源不受同源策略限制的特点）<br>JSONP需要前后端人员互相配合。</p></blockquote><p>前端页面写法：</p><pre><code>    &lt;body&gt;      &lt;button id="btn"&gt;按钮&lt;/button&gt;      &lt;script type="text/javascript"&gt;        var btn = document.getElementById('btn');        btn.onclick = function () {          //1. 创建一个script标签          var script = document.createElement('script');          //2. 设置回调函数          window.getData = function (data) {            console.log(data);//拿到数据          }          //3. 设置script标签src属性，填写跨域请求的地址          script.src = 'http://localhost:3000/jsonp?callback=getData';          //4. 将script标签添加到body中生效          document.body.appendChild(script);          //5.不影响整体DOM结构，删除script标签          document.body.removeChild(script);        }      &lt;/script&gt;    &lt;/body&gt;</code></pre><p>后端写法：</p><pre><code>app.get('/jsonp', (req, res) =&gt; {  //解构赋值获取请求参数  const {callback} = req.query  //去数据库查找对应数据  const data = [{name: 'tom', age: 18}, {name: 'jerry', age: 20}];  res.send(callback + '(' + JSON.stringify(data) + ')');})</code></pre><p><strong>2.后台配置cors解决跨域</strong></p><pre><code>以Node为例：res.set('Access-Control-Allow-Origin', 'http://localhost:63342');</code></pre><p><strong>3.使用代理服务器</strong></p><pre><code>例如：nginx等</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 跨域 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo,搭建个人博客</title>
      <link href="/2020/03/06/hexo-da-jian-ge-ren-bo-ke/"/>
      <url>/2020/03/06/hexo-da-jian-ge-ren-bo-ke/</url>
      
        <content type="html"><![CDATA[<h3 id="本文概要"><a href="#本文概要" class="headerlink" title="本文概要"></a>本文概要</h3><ul><li>hexo 使用，及怎么去改主题的模板</li></ul><h2 id="Hexo-介绍"><a href="#Hexo-介绍" class="headerlink" title="Hexo 介绍"></a>Hexo 介绍</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
